"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9897],{9897:(K,Z,m)=>{m.r(Z),m.d(Z,{PersonalHealthRecordModule:()=>W});var p=m(6814),g=m(3699),h=m(5861),_=m(5619),e=m(6689),f=m(3970),l=m(9810),u=m(95);function A(n,a){if(1&n){const s=e.EpF();e.TgZ(0,"ion-button",15),e.NdJ("click",function(){e.CHM(s);const o=e.oxw();return e.KtG(o.navigate())}),e._uU(1,"Edit"),e.qZA()}}function T(n,a){if(1&n&&(e.TgZ(0,"ion-col",16)(1,"p"),e._uU(2),e.ALo(3,"async"),e.qZA()()),2&n){const s=e.oxw();let t;e.xp6(2),e.hij("",null==(t=e.lcZ(3,1,s.phr$))?null:t.heightCm," cm")}}function I(n,a){if(1&n&&(e.TgZ(0,"ion-col",16)(1,"p"),e._uU(2),e.ALo(3,"async"),e.ALo(4,"async"),e.qZA()()),2&n){const s=e.oxw();let t;e.xp6(2),e.AsE("",null==(t=e.lcZ(3,2,s.phr$))?null:t.heightFt," feet, ",null==(t=e.lcZ(4,4,s.phr$))?null:t.heightIn," inches")}}function U(n,a){if(1&n&&(e.TgZ(0,"ion-col",16)(1,"p"),e._uU(2),e.ALo(3,"async"),e.qZA()()),2&n){const s=e.oxw();let t;e.xp6(2),e.hij("",null==(t=e.lcZ(3,1,s.phr$))?null:t.weight," kg")}}function q(n,a){if(1&n&&(e.TgZ(0,"ion-col",16)(1,"p"),e._uU(2),e.ALo(3,"async"),e.qZA()()),2&n){const s=e.oxw();let t;e.xp6(2),e.hij("",null==(t=e.lcZ(3,1,s.phr$))?null:t.weight," lbs")}}function k(n,a){if(1&n&&(e.TgZ(0,"ion-item",17)(1,"ion-col",18)(2,"p"),e._uU(3),e.ALo(4,"async"),e.qZA()()()),2&n){const s=e.oxw();let t;e.xp6(3),e.hij("Other Comorbidity: ",null==(t=e.lcZ(4,1,s.phr$))?null:t.otherComorbidityIndicate,"")}}function M(n,a){1&n&&(e.TgZ(0,"ion-card",19)(1,"ion-card-content")(2,"p",20),e._uU(3,"No medications added yet"),e.qZA()()())}function x(n,a){if(1&n&&(e.TgZ(0,"ion-card")(1,"ion-card-content")(2,"ion-row")(3,"ion-col",21)(4,"p"),e._uU(5),e.qZA()(),e.TgZ(6,"ion-col",21)(7,"p"),e._uU(8),e.qZA()(),e.TgZ(9,"ion-col",21)(10,"p"),e._uU(11),e.qZA()()()()()),2&n){const s=a.$implicit;e.xp6(5),e.Oqu(s.name),e.xp6(3),e.Oqu(s.dosage),e.xp6(3),e.Oqu(s.frequency)}}let S=(()=>{var n;class a{constructor(t,o){this.router=t,this.pouchService=o,this.access=localStorage.getItem("access"),this.noMeds=!0,this.phrSubject=new _.X({id:"",pregnancyId:"",weightUnit:"",weight:0,heightUnit:"cm",heightCm:0,heightFt:0,heightIn:0,heartProblem:!1,liverProblem:!1,kidneyProblem:!1,cancer:!1,lungProblem:!1,hypertension:!1,diabetes:!1,obesity:!1,stroke:!1,hiv:!1,otherComorbidity:!1,otherComorbidityIndicate:""}),this.phr$=this.phrSubject.asObservable(),this.medsSubject=new _.X([]),this.meds$=this.medsSubject.asObservable(),this.comorbs={heartProblem:!1,liverProblem:!1,kidneyProblem:!1,cancer:!1,lungProblem:!1,hypertension:!1,diabetes:!1,obesity:!1,stroke:!1,hiv:!1,otherComorbidity:!1}}ngOnInit(){}ionViewWillEnter(){this.getPhrMeds()}getPhrMeds(){var t=this;return(0,h.Z)(function*(){try{t.pouchService.motherDb||t.pouchService.reiniMotherPouch();const o=yield t.pouchService.phrDb.get(localStorage.getItem("selected_phr")),i={id:o._id,pregnancyId:o.pregnancyId,weightUnit:o.weightUnit,weight:o.weight,heightUnit:o.heightUnit,heightCm:o.heightCm,heightFt:o.heightFt,heightIn:o.heightIn,heartProblem:o.heartProblem,liverProblem:o.liverProblem,kidneyProblem:o.kidneyProblem,cancer:o.cancer,lungProblem:o.lungProblem,hypertension:o.hypertension,diabetes:o.diabetes,obesity:o.obesity,stroke:o.stroke,hiv:o.hiv,otherComorbidity:o.otherComorbidity,otherComorbidityIndicate:o.otherComorbidityIndicate};t.phrSubject.next(i),t.phrSubject.subscribe(d=>{t.comorbs.heartProblem=d.heartProblem,t.comorbs.liverProblem=d.liverProblem,t.comorbs.kidneyProblem=d.kidneyProblem,t.comorbs.cancer=d.cancer,t.comorbs.lungProblem=d.lungProblem,t.comorbs.hypertension=d.hypertension,t.comorbs.diabetes=d.diabetes,t.comorbs.obesity=d.obesity,t.comorbs.stroke=d.stroke,t.comorbs.hiv=d.hiv,t.comorbs.otherComorbidity=d.otherComorbidity}),yield t.pouchService.medsDb.info();let r=yield t.pouchService.medsDb.find({selector:{personalHealthRecordId:i.id}});t.noMeds=!(r.docs.length>0);const c=r.docs.map(d=>({id:d._id,personalHealthRecordId:d.personalHealthRecordId,name:d.name,dosage:d.dosage,frequency:d.frequency}));t.medsSubject.next(c)}catch(o){console.log(o)}})()}navigate(){let t;this.phrSubject.subscribe(o=>{t="/admin/patient/details/phr/edit/"+o.id}),this.router.navigate([t])}}return(n=a).\u0275fac=function(t){return new(t||n)(e.Y36(g.F0),e.Y36(f.M))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-personal-health-record",5,"a"]],decls:88,vars:28,consts:[["slot","start"],["slot","end"],[3,"click",4,"ngIf"],[1,""],["lines","full"],["size","3"],["size","6",4,"ngIf"],[1,"border-1"],["size","4"],["size","2"],["disabled","true",3,"ngModel","ngModelChange"],["class","border-1 bottom-padding-5",4,"ngIf"],[1,"ion-text-center"],["color","warning",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"click"],["size","6"],[1,"border-1","bottom-padding-5"],["size","12"],["color","warning"],[1,"ion-text-center","ion-padding"],["size","4",1,"d-flex","ion-align-items-center","ion-text-left"]],template:function(t,o){if(1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Personal Health Record"),e.qZA(),e.TgZ(4,"ion-buttons",0),e._UZ(5,"ion-back-button"),e.qZA(),e.TgZ(6,"ion-buttons",1),e.YNc(7,A,2,0,"ion-button",2),e.qZA()()(),e.TgZ(8,"ion-content",3)(9,"ion-card")(10,"ion-list",4)(11,"ion-item")(12,"ion-col",5)(13,"p"),e._uU(14,"Height"),e.qZA()(),e.YNc(15,T,4,3,"ion-col",6),e.ALo(16,"async"),e.YNc(17,I,5,6,"ion-col",6),e.ALo(18,"async"),e.qZA(),e.TgZ(19,"ion-item")(20,"ion-col",5)(21,"p"),e._uU(22,"Weight"),e.qZA()(),e.YNc(23,U,4,3,"ion-col",6),e.ALo(24,"async"),e.YNc(25,q,4,3,"ion-col",6),e.ALo(26,"async"),e.qZA(),e.TgZ(27,"ion-item",7)(28,"ion-col",8)(29,"p"),e._uU(30,"Heart Problem"),e.qZA()(),e.TgZ(31,"ion-col",9)(32,"ion-checkbox",10),e.NdJ("ngModelChange",function(r){return o.comorbs.heartProblem=r}),e.qZA()(),e.TgZ(33,"ion-col",8)(34,"p"),e._uU(35,"Liver Problem"),e.qZA()(),e.TgZ(36,"ion-col",9)(37,"ion-checkbox",10),e.NdJ("ngModelChange",function(r){return o.comorbs.liverProblem=r}),e.qZA()()(),e.TgZ(38,"ion-item",7)(39,"ion-col",8)(40,"p"),e._uU(41,"Kidney Problem"),e.qZA()(),e.TgZ(42,"ion-col",9)(43,"ion-checkbox",10),e.NdJ("ngModelChange",function(r){return o.comorbs.kidneyProblem=r}),e.qZA()(),e.TgZ(44,"ion-col",8)(45,"p"),e._uU(46,"Cancer"),e.qZA()(),e.TgZ(47,"ion-col",9)(48,"ion-checkbox",10),e.NdJ("ngModelChange",function(r){return o.comorbs.cancer=r}),e.qZA()()(),e.TgZ(49,"ion-item",7)(50,"ion-col",8)(51,"p"),e._uU(52,"Lung Problem"),e.qZA()(),e.TgZ(53,"ion-col",9)(54,"ion-checkbox",10),e.NdJ("ngModelChange",function(r){return o.comorbs.lungProblem=r}),e.qZA()(),e.TgZ(55,"ion-col",8)(56,"p"),e._uU(57,"Hypertension"),e.qZA()(),e.TgZ(58,"ion-col",9)(59,"ion-checkbox",10),e.NdJ("ngModelChange",function(r){return o.comorbs.hypertension=r}),e.qZA()()(),e.TgZ(60,"ion-item",7)(61,"ion-col",8)(62,"p"),e._uU(63,"Diabetes"),e.qZA()(),e.TgZ(64,"ion-col",9)(65,"ion-checkbox",10),e.NdJ("ngModelChange",function(r){return o.comorbs.diabetes=r}),e.qZA()(),e.TgZ(66,"ion-col",8)(67,"p"),e._uU(68,"Obesity"),e.qZA()(),e.TgZ(69,"ion-col",9)(70,"ion-checkbox",10),e.NdJ("ngModelChange",function(r){return o.comorbs.obesity=r}),e.qZA()()(),e.TgZ(71,"ion-item",7)(72,"ion-col",8)(73,"p"),e._uU(74,"Stroke"),e.qZA()(),e.TgZ(75,"ion-col",9)(76,"ion-checkbox",10),e.NdJ("ngModelChange",function(r){return o.comorbs.stroke=r}),e.qZA()(),e.TgZ(77,"ion-col",8)(78,"p"),e._uU(79,"HIV"),e.qZA()(),e.TgZ(80,"ion-col",9)(81,"ion-checkbox",10),e.NdJ("ngModelChange",function(r){return o.comorbs.hiv=r}),e.qZA()()(),e.YNc(82,k,5,3,"ion-item",11),e.qZA()(),e.TgZ(83,"h3",12),e._uU(84,"Medications"),e.qZA(),e.YNc(85,M,4,0,"ion-card",13),e.YNc(86,x,12,3,"ion-card",14),e.ALo(87,"async"),e.qZA()),2&t){let i,r,c,d;e.xp6(7),e.Q6J("ngIf","approved"==o.access),e.xp6(8),e.Q6J("ngIf","cm"==(null==(i=e.lcZ(16,18,o.phr$))?null:i.heightUnit)),e.xp6(2),e.Q6J("ngIf","foot"==(null==(r=e.lcZ(18,20,o.phr$))?null:r.heightUnit)),e.xp6(6),e.Q6J("ngIf","kg"==(null==(c=e.lcZ(24,22,o.phr$))?null:c.weightUnit)),e.xp6(2),e.Q6J("ngIf","lbs"==(null==(d=e.lcZ(26,24,o.phr$))?null:d.weightUnit)),e.xp6(7),e.Q6J("ngModel",o.comorbs.heartProblem),e.xp6(5),e.Q6J("ngModel",o.comorbs.liverProblem),e.xp6(6),e.Q6J("ngModel",o.comorbs.kidneyProblem),e.xp6(5),e.Q6J("ngModel",o.comorbs.cancer),e.xp6(6),e.Q6J("ngModel",o.comorbs.lungProblem),e.xp6(5),e.Q6J("ngModel",o.comorbs.hypertension),e.xp6(6),e.Q6J("ngModel",o.comorbs.diabetes),e.xp6(5),e.Q6J("ngModel",o.comorbs.obesity),e.xp6(6),e.Q6J("ngModel",o.comorbs.stroke),e.xp6(5),e.Q6J("ngModel",o.comorbs.hiv),e.xp6(1),e.Q6J("ngIf",1==o.comorbs.otherComorbidity),e.xp6(3),e.Q6J("ngIf",o.noMeds),e.xp6(1),e.Q6J("ngForOf",e.lcZ(87,26,o.meds$))}},dependencies:[p.sg,p.O5,l.YG,l.Sm,l.PM,l.FN,l.nz,l.wI,l.W2,l.Gu,l.Ie,l.q_,l.Nd,l.wd,l.sr,l.w,l.oU,u.JJ,u.On,p.Ov]}),a})();function N(n,a){1&n&&e._UZ(0,"ion-input",33)}function w(n,a){1&n&&e._UZ(0,"ion-input",34)}function H(n,a){1&n&&e._UZ(0,"ion-input",35)}function R(n,a){1&n&&e._UZ(0,"ion-input",36)}function J(n,a){1&n&&e._UZ(0,"ion-input",37)}function F(n,a){1&n&&e._UZ(0,"ion-input",38)}let Y=(()=>{var n;class a{constructor(t,o,i,r){this.router=t,this.route=o,this.formBuilder=i,this.pouchService=r,this.id=String(this.route.snapshot.paramMap.get("id"))}ngOnInit(){this.phrForm=this.formBuilder.group({id:[""],pregnancyId:[""],weightUnit:[""],weight:[0],heightUnit:[""],heightCm:[0],heightFt:[0],heightIn:[0],heartProblem:["false"],liverProblem:["false"],kidneyProblem:["false"],cancer:["false"],lungProblem:["false"],hypertension:["false"],diabetes:["false"],obesity:["false"],stroke:["false"],hiv:["false"],otherComorbidity:["false"],otherComorbidityIndicate:[""]}),this.getPhr()}onSubmit(){var t=this;return(0,h.Z)(function*(){const o=t.phrForm.value,i={_id:o.id,pregnancyId:o.pregnancyId,weightUnit:o.weightUnit,weight:o.weight,heightUnit:o.heightUnit,heightCm:o.heightCm,heightFt:o.heightFt,heightIn:o.heightIn,heartProblem:o.heartProblem,liverProblem:o.liverProblem,kidneyProblem:o.kidneyProblem,cancer:o.cancer,lungProblem:o.lungProblem,hypertension:o.hypertension,diabetes:o.diabetes,obesity:o.obesity,stroke:o.stroke,hiv:o.hiv,otherComorbidity:o.otherComorbidity,otherComorbidityIndicate:o.otherComorbidityIndicate};try{var r=yield t.pouchService.phrDb.get(t.id);i._rev=r._rev,yield t.pouchService.phrDb.put(i),t.router.navigate(["/mother/baby-book/phr"])}catch(c){console.log(c)}})()}getPhr(){var t=this;return(0,h.Z)(function*(){t.pouchService.motherDb||t.pouchService.reiniMotherPouch();try{let o=yield t.pouchService.phrDb.get(t.id);t.phrForm.setValue({id:o._id,pregnancyId:o.pregnancyId,weightUnit:o.weightUnit,weight:o.weight,heightUnit:o.heightUnit,heightCm:o.heightCm,heightFt:o.heightFt,heightIn:o.heightIn,heartProblem:o.heartProblem,liverProblem:o.liverProblem,kidneyProblem:o.kidneyProblem,cancer:o.cancer,lungProblem:o.lungProblem,hypertension:o.hypertension,diabetes:o.diabetes,obesity:o.obesity,stroke:o.stroke,hiv:o.hiv,otherComorbidity:o.otherComorbidity,otherComorbidityIndicate:o.otherComorbidityIndicate})}catch(o){console.log(o)}})()}navigate(){this.router.navigate(["/admin/patient/details/phr/medications"])}convertWeight(t){"kg"==t.target.value?this.phrForm.patchValue({weight:Math.round(.453592*this.phrForm.controls.weight.value*100)/100}):"lbs"==t.target.value&&this.phrForm.patchValue({weight:Math.round(2.20462*this.phrForm.controls.weight.value*100)/100})}convertHeight(t){if("foot"==t.target.value){const o=this.phrForm.controls.heightCm.value/2.54,i=Math.floor(o/12),r=Math.round(o%12);this.phrForm.patchValue({heightFt:i,heightIn:r})}else if("cm"==t.target.value){const o=Math.max(this.phrForm.controls.heightIn.value);this.phrForm.patchValue({heightCm:Math.round(2.54*(12*this.phrForm.controls.heightFt.value+o)*100)/100})}}}return(n=a).\u0275fac=function(t){return new(t||n)(e.Y36(g.F0),e.Y36(g.gz),e.Y36(u.qu),e.Y36(f.M))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-edit"]],decls:103,vars:7,consts:[["slot","start"],["slot","end"],[3,"click"],[3,"formGroup","ngSubmit"],["label","Centimeter","formControlName","heightCm","labelPlacement","stacked","type","number",4,"ngIf"],["label","Feet","formControlName","heightFt","labelPlacement","stacked","type","number",4,"ngIf"],["label","Inch","formControlName","heightIn","labelPlacement","stacked","type","number",4,"ngIf"],["formControlName","heightUnit","value","cm",1,"d-flex"],["value","cm",1,"ion-padding-end"],["value","foot"],["label","Kilogram","formControlName","weight","labelPlacement","stacked","type","number",4,"ngIf"],["label","Pound","formControlName","weight","labelPlacement","stacked","type","decimal",4,"ngIf"],["formControlName","weightUnit","value","kg",1,"d-flex"],["value","kg",1,"ion-padding-end"],["value","lbs"],[1,"border-1"],["size","4"],["size","2"],["formControlName","heartProblem"],["formControlName","liverProblem"],["formControlName","kidneyProblem"],["formControlName","cancer"],["formControlName","lungProblem"],["formControlName","hypertension"],["formControlName","diabetes"],["formControlName","obesity"],["formControlName","stroke"],["formControlName","hiv"],["formControlName","otherComorbidity"],["size","6"],["label","Indicate Comorbidity","formControlName","otherComorbidityIndicate","type","text","labelPlacement","stacked",4,"ngIf"],[2,"display","flex","justify-content","center"],["type","submit"],["label","Centimeter","formControlName","heightCm","labelPlacement","stacked","type","number"],["label","Feet","formControlName","heightFt","labelPlacement","stacked","type","number"],["label","Inch","formControlName","heightIn","labelPlacement","stacked","type","number"],["label","Kilogram","formControlName","weight","labelPlacement","stacked","type","number"],["label","Pound","formControlName","weight","labelPlacement","stacked","type","decimal"],["label","Indicate Comorbidity","formControlName","otherComorbidityIndicate","type","text","labelPlacement","stacked"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Edit Health Record"),e.qZA(),e.TgZ(4,"ion-buttons",0),e._UZ(5,"ion-back-button"),e.qZA(),e.TgZ(6,"ion-buttons",1)(7,"ion-button",2),e.NdJ("click",function(){return o.navigate()}),e._uU(8,"Meds"),e.qZA()()()(),e.TgZ(9,"ion-content")(10,"form",3),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(11,"ion-card")(12,"ion-list")(13,"ion-item")(14,"p"),e._uU(15," Height "),e.qZA()(),e.TgZ(16,"ion-item"),e.YNc(17,N,1,0,"ion-input",4),e.YNc(18,w,1,0,"ion-input",5),e.YNc(19,H,1,0,"ion-input",6),e.TgZ(20,"ion-radio-group",7)(21,"ion-radio",8),e._uU(22,"cm"),e.qZA(),e.TgZ(23,"ion-radio",9),e._uU(24,"ft & in"),e.qZA()()(),e.TgZ(25,"ion-item")(26,"p"),e._uU(27," Weight "),e.qZA()(),e.TgZ(28,"ion-item"),e.YNc(29,R,1,0,"ion-input",10),e.YNc(30,J,1,0,"ion-input",11),e.TgZ(31,"ion-radio-group",12)(32,"ion-radio",13),e._uU(33,"kg"),e.qZA(),e.TgZ(34,"ion-radio",14),e._uU(35,"lbs"),e.qZA()()(),e._UZ(36,"br"),e.TgZ(37,"ion-item",15)(38,"ion-col",16)(39,"p"),e._uU(40,"Heart Problem"),e.qZA()(),e.TgZ(41,"ion-col",17),e._UZ(42,"ion-checkbox",18),e.qZA(),e.TgZ(43,"ion-col",16)(44,"p"),e._uU(45,"Liver Problem"),e.qZA()(),e.TgZ(46,"ion-col",17),e._UZ(47,"ion-checkbox",19),e.qZA()(),e.TgZ(48,"ion-item",15)(49,"ion-col",16)(50,"p"),e._uU(51,"Kidney Problem"),e.qZA()(),e.TgZ(52,"ion-col",17),e._UZ(53,"ion-checkbox",20),e.qZA(),e.TgZ(54,"ion-col",16)(55,"p"),e._uU(56,"Cancer"),e.qZA()(),e.TgZ(57,"ion-col",17),e._UZ(58,"ion-checkbox",21),e.qZA()(),e.TgZ(59,"ion-item",15)(60,"ion-col",16)(61,"p"),e._uU(62,"Lung Problem"),e.qZA()(),e.TgZ(63,"ion-col",17),e._UZ(64,"ion-checkbox",22),e.qZA(),e.TgZ(65,"ion-col",16)(66,"p"),e._uU(67,"Hypertension"),e.qZA()(),e.TgZ(68,"ion-col",17),e._UZ(69,"ion-checkbox",23),e.qZA()(),e.TgZ(70,"ion-item",15)(71,"ion-col",16)(72,"p"),e._uU(73,"Diabetes"),e.qZA()(),e.TgZ(74,"ion-col",17),e._UZ(75,"ion-checkbox",24),e.qZA(),e.TgZ(76,"ion-col",16)(77,"p"),e._uU(78,"Obesity"),e.qZA()(),e.TgZ(79,"ion-col",17),e._UZ(80,"ion-checkbox",25),e.qZA()(),e.TgZ(81,"ion-item",15)(82,"ion-col",16)(83,"p"),e._uU(84,"Stroke"),e.qZA()(),e.TgZ(85,"ion-col",17),e._UZ(86,"ion-checkbox",26),e.qZA(),e.TgZ(87,"ion-col",16)(88,"p"),e._uU(89,"HIV"),e.qZA()(),e.TgZ(90,"ion-col",17),e._UZ(91,"ion-checkbox",27),e.qZA()(),e.TgZ(92,"ion-item",15)(93,"ion-col",16)(94,"p"),e._uU(95,"Other Comorbidity"),e.qZA()(),e.TgZ(96,"ion-col",17),e._UZ(97,"ion-checkbox",28),e.qZA(),e.TgZ(98,"ion-col",29),e.YNc(99,F,1,0,"ion-input",30),e.qZA()()()(),e.TgZ(100,"ion-row",31)(101,"ion-button",32),e._uU(102,"Save"),e.qZA()()()()),2&t&&(e.xp6(10),e.Q6J("formGroup",o.phrForm),e.xp6(7),e.Q6J("ngIf","cm"==o.phrForm.controls.heightUnit.value),e.xp6(1),e.Q6J("ngIf","foot"==o.phrForm.controls.heightUnit.value),e.xp6(1),e.Q6J("ngIf","foot"==o.phrForm.controls.heightUnit.value),e.xp6(10),e.Q6J("ngIf","kg"==o.phrForm.controls.weightUnit.value),e.xp6(1),e.Q6J("ngIf","lbs"==o.phrForm.controls.weightUnit.value),e.xp6(69),e.Q6J("ngIf",1==o.phrForm.controls.otherComorbidity.value))},dependencies:[p.O5,l.YG,l.Sm,l.PM,l.nz,l.wI,l.W2,l.Gu,l.pK,l.Ie,l.q_,l.B7,l.se,l.Nd,l.wd,l.sr,l.w,l.as,l.U5,l.QI,l.j9,l.oU,u._Y,u.JJ,u.JL,u.sg,u.u]}),a})();var v=m(2014),D=m(3989);let y=(()=>{var n;class a{constructor(t,o){this.storage=t,this.loggedService=o,this._storage=null,this.id="",this.pregnancyId="",this.init()}ngOnInit(){}init(){var t=this;return(0,h.Z)(function*(){const o=yield t.storage.create();t._storage=o})()}set(t){var o=this;return(0,h.Z)(function*(){yield o.getAll().then(i=>{if(i){var c;i.push(t),null===(c=o._storage)||void 0===c||c.set("personalHealthRecords",i)}else{var r;const d=[];d.push(t),null===(r=o._storage)||void 0===r||r.set("personalHealthRecords",d)}})})()}getAll(){var t=this;return(0,h.Z)(function*(){var o;return yield null===(o=t._storage)||void 0===o?void 0:o.get("personalHealthRecords")})()}getById(t){var o=this;return(0,h.Z)(function*(){return yield o.getAll().then(i=>{let r;return i.forEach(c=>{t===c.id&&(r=c)}),r}).catch(i=>i)})()}getByPregnancyId(){var t=this;return(0,h.Z)(function*(){return yield t.loggedService.getLoggedData().then(o=>t.getAll().then(i=>{let r;return i.forEach(c=>{o.pregnancyId===c.pregnancyId&&(t.pregnancyId=c.pregnancyId,t.id=c.id,r=c)}),r}))})()}updatePhr(t){var o=this;return(0,h.Z)(function*(){console.log(t),yield o.getAll().then(i=>{var r;i.forEach(c=>{t.id===c.id&&(console.log("match found"),c.weightUnit=t.weightUnit,c.weight=t.weight,c.heightUnit=t.heightUnit,c.heightCm=t.heightCm,c.heightFt=t.heightFt,c.heightIn=t.heightIn,c.heartProblem=t.heartProblem,c.liverProblem=t.liverProblem,c.kidneyProblem=t.kidneyProblem,c.cancer=t.cancer,c.lungProblem=t.lungProblem,c.hypertension=t.hypertension,c.diabetes=t.diabetes,c.obesity=t.obesity,c.stroke=t.stroke,c.hiv=t.hiv)}),null===(r=o._storage)||void 0===r||r.set("personalHealthRecords",i),console.log("nauuna ba")}).then(()=>{var i;null===(i=o._storage)||void 0===i||i.get("personalHealthRecords").then(r=>{console.log(r)})})})()}}return(n=a).\u0275fac=function(t){return new(t||n)(e.LFG(v.K),e.LFG(D.A))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),a})(),C=(()=>{var n;class a{constructor(t,o){this.storage=t,this.phrService=o,this._storage=null,this.init()}ngOnInit(){}init(){var t=this;return(0,h.Z)(function*(){const o=yield t.storage.create();t._storage=o})()}set(t){var o=this;return(0,h.Z)(function*(){yield o.getAll().then(i=>{if(i){var c;i.push(t),null===(c=o._storage)||void 0===c||c.set("medications",i)}else{var r;const d=[];d.push(t),null===(r=o._storage)||void 0===r||r.set("medications",d)}})})()}getAll(){var t=this;return(0,h.Z)(function*(){var o;return yield null===(o=t._storage)||void 0===o?void 0:o.get("medications")})()}getById(t){var o=this;return(0,h.Z)(function*(){return yield o.getAll().then(i=>{let r;return i.forEach(c=>{t===c.id&&(r=c)}),r}).catch(i=>i)})()}getByPhrId(){var t=this;return(0,h.Z)(function*(){return t.getAll().then(o=>{if(console.log(o),console.log(t.phrService.id),!o)throw new Error("No medications yet");let i=[];return o.forEach(r=>{t.phrService.id===r.personalHealthRecordId&&(console.log("match medications!"),i.push(r))}),i})})()}addUpdateMedication(t){var o=this;return(0,h.Z)(function*(){console.log(t),yield o.getAll().then(i=>{if(i){var r;let d=!1;i.forEach(b=>{t.id===b.id&&(console.log("match found"),d=!0,b.name=t.name,b.dosage=t.dosage,b.frequency=t.frequency)}),!1===d&&i.push(t),null===(r=o._storage)||void 0===r||r.set("medications",i)}else{var c;const d=[];d.push(t),null===(c=o._storage)||void 0===c||c.set("medications",d)}}).then(()=>{var i;null===(i=o._storage)||void 0===i||i.get("medications").then(r=>{console.log(r)})})})()}}return(n=a).\u0275fac=function(t){return new(t||n)(e.LFG(v.K),e.LFG(y))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),a})();function E(n,a){1&n&&(e.TgZ(0,"ion-card",5)(1,"ion-card-content")(2,"p",6),e._uU(3,"No medications added yet"),e.qZA()()())}function Q(n,a){if(1&n&&(e.TgZ(0,"a",7)(1,"ion-card")(2,"ion-card-content")(3,"ion-row")(4,"ion-col",8)(5,"p"),e._uU(6),e.qZA()(),e.TgZ(7,"ion-col",9)(8,"p"),e._uU(9),e.qZA()(),e.TgZ(10,"ion-col",9)(11,"p"),e._uU(12),e.qZA()()()()()()),2&n){const s=a.$implicit;e.MGl("routerLink","/admin/patient/details/phr/medications/edit/",s.id,""),e.xp6(6),e.Oqu(s.name),e.xp6(3),e.Oqu(s.dosage),e.xp6(3),e.Oqu(s.frequency)}}let O=(()=>{var n;class a{constructor(t,o,i){this.router=t,this.medicationsService=o,this.pouchService=i,this.medications=[],this.noMeds=!0,this.medsSubject=new _.X([]),this.meds$=this.medsSubject.asObservable()}ngOnInit(){}ionViewWillEnter(){this.getMeds()}navigate(t){this.router.navigate([t])}getMeds(){var t=this;return(0,h.Z)(function*(){t.pouchService.motherDb||t.pouchService.reiniMotherPouch();try{let o=yield t.pouchService.medsDb.find({selector:{personalHealthRecordId:localStorage.getItem("selected_phr")}});console.log(o),t.noMeds=!(o.docs.length>0);const i=o.docs.map(r=>({id:r._id,personalHealthRecordId:r.personalHealthRecordId,name:r.name,dosage:r.dosage,frequency:r.frequency}));t.medsSubject.next(i)}catch(o){console.log(o)}})()}}return(n=a).\u0275fac=function(t){return new(t||n)(e.Y36(g.F0),e.Y36(C),e.Y36(f.M))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-medications",5,"a"]],decls:13,vars:4,consts:[["slot","start"],["slot","end"],[3,"click"],["color","warning",4,"ngIf"],["routerLinkActive","active","ariaCurrentWhenActive","page",3,"routerLink",4,"ngFor","ngForOf"],["color","warning"],[1,"ion-text-center","ion-padding"],["routerLinkActive","active","ariaCurrentWhenActive","page",3,"routerLink"],["size","6",1,"d-flex","ion-align-items-center","ion-text-left"],["size","3",1,"d-flex","ion-align-items-center","ion-text-left"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Medications"),e.qZA(),e.TgZ(4,"ion-buttons",0),e._UZ(5,"ion-back-button"),e.qZA(),e.TgZ(6,"ion-buttons",1)(7,"ion-button",2),e.NdJ("click",function(){return o.navigate("/admin/patient/details/phr/medications/add")}),e._uU(8,"Add"),e.qZA()()()(),e.TgZ(9,"ion-content"),e.YNc(10,E,4,0,"ion-card",3),e.YNc(11,Q,13,4,"a",4),e.ALo(12,"async"),e.qZA()),2&t&&(e.xp6(10),e.Q6J("ngIf",o.noMeds),e.xp6(1),e.Q6J("ngForOf",e.lcZ(12,2,o.meds$)))},dependencies:[p.sg,p.O5,g.rH,g.Od,l.YG,l.Sm,l.PM,l.FN,l.wI,l.W2,l.Gu,l.Nd,l.wd,l.sr,l.oU,l.Fo,p.Ov]}),a})();var z=m(4532);function G(n,a){1&n&&(e.TgZ(0,"ion-title"),e._uU(1,"Add Medication"),e.qZA())}function L(n,a){1&n&&(e.TgZ(0,"ion-title"),e._uU(1,"Edit Medication"),e.qZA())}function B(n,a){if(1&n&&(e.TgZ(0,"ion-buttons",9)(1,"ion-button",10),e._uU(2,"Delete"),e.qZA(),e._UZ(3,"ion-alert",11),e.qZA()),2&n){const s=e.oxw();e.xp6(3),e.Q6J("buttons",s.alertButtons)}}let P=(()=>{var n;class a{constructor(t,o,i,r,c,d,b,$){this.route=t,this.formBuilder=o,this.medicationsService=i,this.phrService=r,this.router=c,this.toastController=d,this.pouchService=b,this.utilsService=$,this.id=String(this.route.snapshot.paramMap.get("id")),this.alertButtons=["Delete"]}ngOnInit(){this.medForm=this.formBuilder.group({id:[""],personalHealthRecordId:[""],name:[""],dosage:[""],frequency:[""]}),this.getMeds()}onSubmit(){var t=this;return(0,h.Z)(function*(){t.pouchService.motherDb||t.pouchService.reiniMotherPouch();const o=t.medForm.value,i={_id:o.id,_rev:"",personalHealthRecordId:""==o.personalHealthRecordId?localStorage.getItem("selected_phr"):o.personalHealthRecordId,name:o.name,dosage:o.dosage,frequency:o.frequency};try{if(""==i._id)i._id=t.utilsService.generateId(),yield t.pouchService.medsDb.put(i),t.presentToast("Medication added");else{var r=yield t.pouchService.medsDb.get(t.id);i._rev=r._rev,yield t.pouchService.medsDb.put(i),t.presentToast("Medication updated")}t.pouchService.medsDb.replicate.to(t.pouchService.customRemote("meds","per-user"),{retry:!0}),t.router.navigate(["/admin/patient/details/phr/medications"])}catch(c){console.log(c)}})()}getMeds(){var t=this;return(0,h.Z)(function*(){if(t.pouchService.motherDb||t.pouchService.reiniMotherPouch(),"null"==t.id)t.medForm.setValue({id:"",personalHealthRecordId:"",name:"",dosage:"",frequency:""});else try{let o=yield t.pouchService.medsDb.get(t.id);t.medForm.setValue({id:o._id,personalHealthRecordId:o.personalHealthRecordId,name:o.name,dosage:o.dosage,frequency:o.frequency})}catch(o){console.log(o)}})()}getPhrID(){var t=this;return(0,h.Z)(function*(){return yield t.pouchService.phrDb.info(),(yield t.pouchService.phrDb.find({selector:{pregnancyId:localStorage.getItem("selected_preg")},fields:["_id"],limit:1})).docs[0]._id})()}presentToast(t){var o=this;return(0,h.Z)(function*(){yield(yield o.toastController.create({message:t,duration:1500,position:"top"})).present()})()}delete(t){var o=this;return(0,h.Z)(function*(){if("backdrop"!==t.detail.role)try{var i=yield o.pouchService.medsDb.get(o.id),r=yield o.pouchService.medsDb.remove(i).then(c=>{o.pouchService.medsDb.replicate.to(o.pouchService.customRemote("meds","per-user"),{retry:!0}),console.log(c),o.router.navigate(["/admin/patient/details/phr/medications"])});console.log(r)}catch(c){console.log(c)}})()}}return(n=a).\u0275fac=function(t){return new(t||n)(e.Y36(g.gz),e.Y36(u.qu),e.Y36(C),e.Y36(y),e.Y36(g.F0),e.Y36(l.yF),e.Y36(f.M),e.Y36(z.F))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-edit",5,"a"]],decls:20,vars:4,consts:[[4,"ngIf"],["slot","start"],["slot","end",4,"ngIf"],[3,"formGroup","ngSubmit"],["label","Name","formControlName","name","id","name","labelPlacement","stacked","value",""],["label","Dosage","formControlName","dosage","labelPlacement","stacked","value",""],["label","Frequency","formControlName","frequency","labelPlacement","stacked","value",""],[2,"display","flex","justify-content","center"],["type","submit"],["slot","end"],["id","present-alert"],["trigger","present-alert","header","Delete Account","message","Are you sure you want to delete medication?",3,"buttons"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar"),e.YNc(2,G,2,0,"ion-title",0),e.YNc(3,L,2,0,"ion-title",0),e.TgZ(4,"ion-buttons",1),e._UZ(5,"ion-back-button"),e.qZA(),e.YNc(6,B,4,1,"ion-buttons",2),e.qZA()(),e.TgZ(7,"ion-content")(8,"form",3),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(9,"ion-card")(10,"ion-list")(11,"ion-item"),e._UZ(12,"ion-input",4),e.qZA(),e.TgZ(13,"ion-item"),e._UZ(14,"ion-input",5),e.qZA(),e.TgZ(15,"ion-item"),e._UZ(16,"ion-input",6),e.qZA()()(),e.TgZ(17,"ion-row",7)(18,"ion-button",8),e._uU(19,"Save"),e.qZA()()()()),2&t&&(e.xp6(2),e.Q6J("ngIf","null"==o.medId),e.xp6(1),e.Q6J("ngIf","null"!=o.medId),e.xp6(3),e.Q6J("ngIf","null"!=o.medId),e.xp6(2),e.Q6J("formGroup",o.medForm))},dependencies:[p.O5,l.Ge,l.YG,l.Sm,l.PM,l.W2,l.Gu,l.pK,l.Ie,l.q_,l.Nd,l.wd,l.sr,l.j9,l.oU,u._Y,u.JJ,u.JL,u.sg,u.u]}),a})();const j=[{path:"",component:S},{path:"edit/:id",component:Y},{path:"medications",component:O},{path:"medications/edit/:id",component:P},{path:"medications/add",component:P}];let V=(()=>{var n;class a{}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[g.Bz.forChild(j),g.Bz]}),a})(),W=(()=>{var n;class a{}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,V,l.Pc,u.UX,u.u5]}),a})()}}]);